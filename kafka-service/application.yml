event-hubs-connection-string: "Endpoint=sb://lims-research.servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=I8+u4PoGVTwxGE85Lp63N9RoceUBZrz9TcZY/g5gN54="
event-hubs-fqdn: "lims-research.servicebus.windows.net"


kafka:
  bootstrap-servers: ${event-hubs-fqdn}:9093
  properties:
    sasl.mechanism: PLAIN
    sasl.jaas.config: 'org.apache.kafka.common.security.plain.PlainLoginModule required username="$ConnectionString" password="${event-hubs-connection-string}";'
    security.protocol: SASL_SSL
  consumer:
    auto-offset-reset: earliest
    enable-auto-commit: true
    group-id: kafka-dispatcher
    missing-topics-fatal: false
    topics: lims-messages,oncorseq_sequencing_in_progress

server:
  port: 8080
  servlet:
    context-path: /dispatcher

dispatcher:
  mode: BLOCKING
  service:
    topics:
      - name: lims-messages
        actions:
          - trigger: echo "Message from eventhubs/lims-messages Process '${process}' has ${status}"
            local: true
      - name: oncorseq_sequencing_in_progress
        actions:
          - trigger: echo "Received message from eventhubs/oncorseq_sequencing_in_progress '${message}'"
